{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["var colorPicker = '';\nvar colorSelected = '00d4ff';\nvar selectedPixels = 0;\nvar pixelsSelected = [];\nvar selectingPixels = false;\n\n$(document).ready(function () {\n\n    setTimeout(function() {\n        $('.grid rect').tooltipster();\n    }, 3000);\n\n    $('.start').click(function(event) {\n        selectingPixels = true;\n\n        $('.main-screen').fadeOut(500, function() {\n            $('.select-screen').fadeIn();\n        });\n\n        event.preventDefault();\n    });\n\n    /**\n     * Setup the color selector\n     */\n    $('.color-selector select option').each(function() {\n        var color = $(this).val();\n        colorPicker += '<div class=\"color\" id=\"' + color.replace('#', '') + '\" style=\"background-color:' + color + '\"></div>';\n    });\n    $('.color-selector').html(colorPicker).show();\n    $('#'+colorSelected).addClass('selected');\n\n    /**\n     * Select a color\n     */\n    $('.color-selector .color').click(function() {\n        //Get the currently selected color\n        $('.color.selected').removeClass('selected');\n\n        //Set the new selected color\n        colorSelected = $(this).attr('id').replace('#', '');\n        $(this).addClass('selected');\n    });\n\n    /**\n     * Select a grid item\n     */\n    $('.grid rect').click(function() {\n        //If the grid item can be selected\n        if (!$(this).is('.disabled') && selectingPixels) {\n            //If the user has not currently selected the item\n            if (pixelsSelected.indexOf($(this).attr('id')) == -1) {\n                $(this).css('fill', '#'+colorSelected);\n                selectedPixels++;\n                pixelsSelected.push($(this).attr('id'));\n            } else {\n                $(this).css('fill', '#333').removeClass('user-specified');\n                selectedPixels--;\n                var index = pixelsSelected.indexOf($(this).attr('id'));\n                pixelsSelected.splice(index, 1);\n            }\n        } else if (selectingPixels) {\n            swal({\n                title: \"Someone's already taken that pixel!\",\n                type: \"error\"\n            });\n        }\n\n        $('#donation-amount').html((selectedPixels*0.5).toFixed(2));\n    });\n\n    /**\n     * Save the pixels and redirect\n     */\n    $('.donate').click(function() {\n\n        $('.donate').attr(\"disabled\", true);\n\n        if (pixelsSelected.length > 3) {\n            var pixels = [];\n            for (var i = 0; i < pixelsSelected.length; i++) {\n                var pixel = {\n                    color: $(this).css('fill'),\n                    x: pixelsSelected[i].substr(0, pixelsSelected[i].indexOf('x')),\n                    y: pixelsSelected[i].substr(pixelsSelected[i].indexOf('x') + 1, pixelsSelected[i].length)\n                };\n                pixels.push(pixel);\n            }\n\n            var data = {\n                pixels: pixels\n            };\n\n            //Save using ajax\n            $.ajax(selectedUrl, {\n                data: JSON.stringify(data),\n                contentType: 'application/json',\n                type: 'POST'\n            }).done(function (data) {\n                //Redirect to JustGiving\n                $(location).attr('href', data);\n            }).fail(function () {\n                swal({\n                    title: \"Something's gone wrong. Please try again.\",\n                    type: \"error\"\n                });\n                location.reload();\n            });\n        } else {\n            swal({\n                title: \"You must select at least 4 pixels!\",\n                type: \"warning\"\n            });\n        }\n\n        event.preventDefault();\n    });\n});"],"sourceRoot":"/source/"}