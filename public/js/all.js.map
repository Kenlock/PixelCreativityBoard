{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["var colorPicker = '';\nvar colorSelected = '00d4ff';\nvar selectedPixels = 0;\nvar pixelsSelected = [];\nvar selectingPixels = false;\n\n$(document).ready(function () {\n\n    setTimeout(function() {\n        $('.grid rect').tooltipster();\n    }, 3000);\n\n    $('.start').click(function(event) {\n        selectingPixels = true;\n\n        $('.main-screen').fadeOut(500, function() {\n            $('.select-screen').fadeIn();\n        });\n\n        event.preventDefault();\n    });\n\n    $('.instructions-button').click(function(event) {\n        swal({\n            title: \"Instructions\",\n            text: '<div class=\"instruction\"><img src=\"/images/pictograms/picto1.jpeg\" alt=\"Select a colour\" /><p>Select a colour</p></div>' +\n            '<div class=\"instruction\"><img src=\"/images/pictograms/picto2.jpg\" alt=\"Create Art\" /><p>Create amazing artwork</p></div>' +\n            '<div class=\"instruction\"><img src=\"/images/pictograms/picto3.jpg\" alt=\"Donate to Save\" /><p>Donate to save</p></div>' +\n            '<div class=\"grid-full\">When the grid is full, a new grid appears</div>',\n            html: true,\n            customClass: \"instructions-modal\"\n        });\n\n        event.preventDefault();\n    });\n\n    /**\n     * Setup the color selector\n     */\n    $('.color-selector select option').each(function() {\n        var color = $(this).val();\n        colorPicker += '<div class=\"color\" id=\"' + color.replace('#', '') + '\" style=\"background-color:' + color + '\"></div>';\n    });\n    $('.color-selector').html(colorPicker).show();\n    $('#'+colorSelected).addClass('selected');\n\n    /**\n     * Select a color\n     */\n    $('.color-selector .color').click(function() {\n        //Get the currently selected color\n        $('.color.selected').removeClass('selected');\n\n        //Set the new selected color\n        colorSelected = $(this).attr('id').replace('#', '');\n        $(this).addClass('selected');\n    });\n\n    /**\n     * Select a grid item\n     */\n    $('.grid rect').click(function() {\n        //If the grid item can be selected\n        if (!$(this).is('.disabled') && selectingPixels) {\n            //If the user has not currently selected the item\n            if (pixelsSelected.indexOf($(this).attr('id')) == -1) {\n                $(this).css('fill', '#'+colorSelected);\n                selectedPixels++;\n                pixelsSelected.push($(this).attr('id'));\n                updateDonateMore();\n            } else {\n                $(this).css('fill', '#333').removeClass('user-specified');\n                selectedPixels--;\n                var index = pixelsSelected.indexOf($(this).attr('id'));\n                pixelsSelected.splice(index, 1);\n                updateDonateMore();\n            }\n        } else if (selectingPixels) {\n            swal({\n                title: \"Someone's already taken that pixel!\",\n                type: \"error\"\n            });\n        }\n\n        $('#donation-amount').html((selectedPixels*0.5).toFixed(2));\n    });\n\n    var updateDonateMore = function () {\n        var message = '';\n        var pixelsLeft = 0;\n\n        if (selectedPixels < 10) {\n            pixelsLeft = 10 - selectedPixels;\n            message = \"a swing seat\";\n        } else if (selectedPixels < 20) {\n            pixelsLeft = 20 - selectedPixels;\n            message = \"a fun pretend motorbike\";\n        } else if (selectedPixels < 50) {\n            pixelsLeft = 50 - selectedPixels;\n            message = \"a low tyre bridge\";\n        } else if (selectedPixels < 80) {\n            pixelsLeft = 80 - selectedPixels;\n            message = \"two pretend cars\";\n        } else if (selectedPixels < 180) {\n            pixelsLeft = 180 - selectedPixels;\n            message = \"a slide\";\n        }\n\n        if (message != '') {\n            if (pixelsLeft == 1) {\n                message = \"1 more pixel = \" + message;\n            } else {\n                message = pixelsLeft + \" more pixels = \" + message;\n            }\n        }\n\n        $(\".donate-more\").html(message);\n    };\n\n    updateDonateMore();\n\n    /**\n     * Save the pixels and redirect\n     */\n    $('.donate').click(function() {\n\n        $('.donate').attr(\"disabled\", true);\n\n        if (pixelsSelected.length > 3) {\n            var pixels = [];\n            for (var i = 0; i < pixelsSelected.length; i++) {\n                var pixel = {\n                    color: $(\"#\"+pixelsSelected[i]).css(\"fill\"),\n                    x: pixelsSelected[i].substr(0, pixelsSelected[i].indexOf('x')),\n                    y: pixelsSelected[i].substr(pixelsSelected[i].indexOf('x') + 1, pixelsSelected[i].length)\n                };\n                pixels.push(pixel);\n            }\n\n            var data = {\n                pixels: pixels\n            };\n\n            //Save using ajax\n            $.ajax(selectedUrl, {\n                data: JSON.stringify(data),\n                contentType: 'application/json',\n                type: 'POST'\n            }).done(function (data) {\n                //Redirect to JustGiving\n                $(location).attr('href', data);\n            }).fail(function () {\n                swal({\n                    title: \"Something's gone wrong. Please try again.\",\n                    type: \"error\"\n                });\n                location.reload();\n            });\n        } else {\n            swal({\n                title: \"You must select at least 4 pixels!\",\n                type: \"warning\"\n            });\n        }\n\n        event.preventDefault();\n    });\n});"],"sourceRoot":"/source/"}